---
title: "Package Versions for `r Sys.getenv('MAJOR_VERSION')`"
output:
  github_document:
    html_preview: false
---

This r:`r Sys.getenv('MAJOR_VERSION')` OpenSAFELY image is based on Ubuntu `r Sys.getenv('BASE')` with R `r getRversion()`.

## R packages

The image comes pre-installed with a set of R packages listed in the table below.
Note that some packages may no longer be on CRAN and so their URL below will link to the archive of that package's source code.

```{r, echo=FALSE, results='asis', warning=FALSE}
suppressMessages(library(dplyr))
pkgs <- read.csv(paste0("/out/", Sys.getenv("MAJOR_VERSION"), "/packages.csv"), header = TRUE)
pkgs$Url <- paste0("<https://cran.r-project.org/package=", pkgs$Package, ">")
if ("dd4d" %in% pkgs$Package) {
  pkgs <-
    pkgs %>%
    mutate(
      Url =
        case_when(
          Package == "dd4d" ~ "<https://remlapmot.r-universe.dev/dd4d>",
          Package != "dd4d" ~ Url
        )
    )
}
knitr::kable(pkgs)
```
